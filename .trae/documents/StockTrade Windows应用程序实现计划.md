# StockTrade Windows应用程序实现计划

## 1. 项目分析

* 现有项目是一个基础的Windows Forms应用程序

* 需要实现股票基金实时数据查看功能，数据来源：iTick API

## 2. 功能需求

1. 窗口名称设置为"StockTrade"
2. 支持输入iTick API Token
3. 支持输入和管理股票/基金代码
4. 定时请求股票/基金数据
5. 展示股票信息：名称、当前价、开盘价、涨跌幅
6. 隐藏快捷键：Alt+\~
7. Windows状态栏滚动展示自选股

## 3. 实现步骤

### 3.1 窗体设计

* 修改Form1.Designer.cs，将窗口名称改为"StockTrade"

* 添加控件：

  * Token输入框及保存按钮

  * 股票代码输入框及添加按钮

  * DataGridView用于展示股票数据

  * 状态栏控件用于滚动展示

### 3.2 数据结构设计

* 创建Stock类，包含：代码、名称、当前价、开盘价、涨跌幅等属性

* 创建配置管理类，用于保存Token和自选股列表

### 3.3 API调用实现

* 添加HttpClient用于调用iTick API

* 实现API请求方法，获取股票实时数据

* 处理API响应，解析数据到Stock对象

### 3.4 定时任务

* 添加Timer控件，设置定时请求数据

* 实现定时更新数据的逻辑

### 3.5 快捷键处理

* 重写ProcessCmdKey方法，处理Alt+\~快捷键

* 实现快捷键对应的功能（如显示/隐藏窗口）

### 3.6 状态栏滚动展示

* 使用NotifyIcon控件实现系统托盘图标

* 实现状态栏文本滚动效果

* 启动时自动开始滚动展示自选股

### 3.7 数据持久化

* 使用JSON或XML文件保存配置（Token和自选股）

* 程序启动时加载配置

* 配置变更时自动保存

## 4. 技术栈

* C# Windows Forms

* HttpClient用于API请求

* JSON.NET用于数据解析（如需要）

* Timer控件用于定时任务

* NotifyIcon用于系统托盘

## 5. 实现顺序

1. 修改窗体基本设置
2. 设计并实现数据结构
3. 实现配置管理功能
4. 实现API调用功能
5. 实现UI控件和布局
6. 实现定时更新逻辑
7. 实现快捷键功能
8. 实现状态栏滚动展示
9. 测试和优化

## 6. 预期效果

* 程序启动后，在系统托盘显示图标

* 状态栏滚动展示自选股信息

* 按下Alt+\~显示主窗口

* 主窗口可输入Token和管理自选股

* 定时更新股票数据并显示在表格中

* 配置自动保存，下次启动时恢复

## 7. 注意事项

* 需要处理API请求异常

* 确保状态栏滚动效果流畅

* 优化数据更新逻辑，避免频繁请求

* 确保快捷键在各种情况下都能正常工作

